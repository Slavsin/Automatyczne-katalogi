<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Katalog PDF - Spod Igly i Nitki</title>
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <!-- Theme Switcher -->
    <div class="theme-switcher">
      <button class="theme-btn" data-theme="light" title="Jasny motyw">
        <svg viewBox="0 0 24 24"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"/></svg>
      </button>
      <button class="theme-btn" data-theme="dark" title="Ciemny motyw">
        <svg viewBox="0 0 24 24"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/></svg>
      </button>
      <button class="theme-btn" data-theme="system" title="Systemowy">
        <svg viewBox="0 0 24 24"><path d="M20 18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z"/></svg>
      </button>
    </div>

    <main class="container">
      <header>
        <img src="/logo.png" alt="Spod Igly i Nitki" class="header-logo" />
        <h1>Katalog produktowy</h1>
        <p class="subtitle">Spod Igly i Nitki</p>
      </header>

      <!-- Wybor zrodla danych -->
      <section class="source-tabs">
        <button class="tab-btn active" data-source="upload">Upload pliku</button>
        <button class="tab-btn" data-source="url">Z adresu URL</button>
      </section>

      <!-- Upload pliku -->
      <section class="upload-panel" id="uploadPanel">
        <h2>Przeslij plik z danymi</h2>
        <p class="upload-hint">Dozwolone formaty: CSV, XML, XLSX (max 50MB)</p>
        <div class="upload-area" id="uploadArea">
          <input type="file" id="fileInput" accept=".csv,.xml,.xlsx,.xls" hidden />
          <div class="upload-content">
            <span class="upload-icon">+</span>
            <p>Kliknij lub przeciagnij plik</p>
          </div>
        </div>
        <div id="uploadStatus" class="upload-status"></div>
      </section>

      <!-- Pobieranie z URL -->
      <section class="url-panel" id="urlPanel" style="display: none;">
        <h2>Pobierz feed z adresu URL</h2>
        <p class="upload-hint">Podaj adres URL do pliku XML z feedem produktowym</p>
        <div class="url-form">
          <div class="filter-group filter-group-wide">
            <label for="feedUrl">Adres URL</label>
            <input type="url" id="feedUrl" value="https://paulina.abstore.pl/offer/export/sl,t1002,pl.xml" />
          </div>
          <div class="filter-row">
            <div class="filter-group">
              <label for="feedLogin">Login (opcjonalnie)</label>
              <input type="text" id="feedLogin" placeholder="login" />
            </div>
            <div class="filter-group">
              <label for="feedPassword">Haslo (opcjonalnie)</label>
              <input type="password" id="feedPassword" placeholder="haslo" />
            </div>
          </div>
          <button type="button" id="fetchUrlBtn" class="btn-secondary">Pobierz feed</button>
        </div>
        <div id="urlStatus" class="upload-status"></div>
      </section>

      <!-- Info o danych -->
      <section class="info-panel" id="feedInfo">
        <p>Przeslij plik aby zobaczyc informacje o produktach...</p>
      </section>

      <!-- Filtry -->
      <section class="filters">
        <h2>Filtry (opcjonalne)</h2>
        <div class="filter-row">
          <div class="filter-group filter-group-wide">
            <label for="searchPhrase">Szukaj w nazwie</label>
            <input type="text" id="searchPhrase" placeholder="np. kocobluza, poduszka, narzuta..." />
          </div>
        </div>
        <div class="filter-row">
          <div class="filter-group">
            <label for="category">Kategoria</label>
            <select id="category">
              <option value="">Wszystkie</option>
            </select>
          </div>
          <div class="filter-group">
            <label for="color">Kolor</label>
            <select id="color">
              <option value="">Wszystkie</option>
            </select>
          </div>
          <div class="filter-group">
            <label for="composition">Sklad</label>
            <select id="composition">
              <option value="">Wszystkie</option>
            </select>
          </div>
        </div>
        <div class="filter-row">
          <div class="filter-group">
            <label for="minPrice">Cena min</label>
            <input type="number" id="minPrice" placeholder="0" min="0" />
          </div>
          <div class="filter-group">
            <label for="maxPrice">Cena max</label>
            <input type="number" id="maxPrice" placeholder="9999" min="0" />
          </div>
          <div class="filter-group">
            <label for="minStock">Min. stan magazynowy</label>
            <input type="number" id="minStock" placeholder="0" min="0" />
          </div>
          <div class="filter-group">
            <label for="onlyAvailable" class="checkbox-label">
              <input type="checkbox" id="onlyAvailable" />
              Tylko dostepne
            </label>
          </div>
        </div>
        <div class="filter-row">
          <div class="filter-group">
            <label for="sortBy">Sortuj po</label>
            <select id="sortBy">
              <option value="">Domyslnie</option>
              <option value="name">Nazwie</option>
              <option value="price">Cenie</option>
              <option value="category">Kategorii</option>
              <option value="stock">Stanie magazynowym</option>
            </select>
          </div>
        </div>
      </section>

      <!-- Rabat handlowy -->
      <section class="discount-panel">
        <h2>Rabat handlowy (opcjonalnie)</h2>
        <p class="upload-hint">Wpisz rabat procentowy dla klienta. Cena z rabatem pojawi sie w katalogu.</p>
        <div class="filter-row">
          <div class="filter-group">
            <label for="discountPercent">Rabat (%)</label>
            <input type="number" id="discountPercent" placeholder="0" min="0" max="100" step="1" />
          </div>
          <div class="filter-group">
            <label for="discountLabel">Nazwa warunkow (opcjonalnie)</label>
            <input type="text" id="discountLabel" placeholder="np. Warunki specjalne" />
          </div>
        </div>
      </section>

      <section class="actions">
        <button id="generate" class="btn-primary" disabled>
          Generuj katalog PDF
        </button>
      </section>

      <section class="log-panel">
        <h2>Logi</h2>
        <div id="log"></div>
      </section>
    </main>

    <script src="/main.js"></script>
  </body>
</html>
